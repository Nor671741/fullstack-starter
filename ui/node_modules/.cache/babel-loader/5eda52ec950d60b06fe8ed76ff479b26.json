{"ast":null,"code":"import axios from 'axios';\nimport { createAction, handleActions } from 'redux-actions';\nconst actions = {\n  PRODUCTS_GET_ALL: 'products/get_all',\n  PRODUCTS_GET_ALL_PENDING: 'products/get_all_PENDING',\n  PRODUCTS_SAVE: 'products/save',\n  PRODUCTS_DELETE: 'products/delete',\n  PRODUCTS_REFRESH: 'products/refresh'\n};\nexport let defaultState = {\n  all: [],\n  fetched: false\n};\nexport const findProducts = createAction(actions.PRODUCTS_GET_ALL, () => (dispatch, getState, config) => axios.get(`${config.restAPIUrl}/products`).then(suc => dispatch(refreshProducts(suc.data))));\nexport const saveProducts = createAction(actions.PRODUCTS_SAVE, product => (dispatch, getState, config) => axios.post(`${config.restAPIUrl}/products`, product).then(suc => {\n  const invs = [];\n  getState().products.all.forEach(inv => {\n    if (inv.id !== suc.data.id) {\n      invs.push(inv);\n    }\n  });\n  invs.push(suc.data);\n  dispatch(refreshProducts(invs));\n}));\nexport const removeProducts = createAction(actions.PRODUCTS_DELETE, ids => (dispatch, getState, config) => axios.delete(`${config.restAPIUrl}/products`, {\n  data: ids\n}).then(suc => {\n  const invs = [];\n  getState().products.all.forEach(inv => {\n    if (!ids.includes(inv.id)) {\n      invs.push(inv);\n    }\n  });\n  dispatch(refreshProducts(invs));\n}));\nexport const refreshProducts = createAction(actions.PRODUCTS_REFRESH, payload => (dispatcher, getState, config) => payload.sort((productA, productB) => productA.name < productB.name ? -1 : productA.name > productB.name ? 1 : 0));\nexport default handleActions({\n  [actions.PRODUCTS_GET_ALL_PENDING]: state => ({ ...state,\n    fetched: false\n  }),\n  [actions.PRODUCTS_REFRESH]: (state, action) => ({ ...state,\n    all: action.payload,\n    fetched: true\n  })\n}, defaultState);","map":{"version":3,"names":["axios","createAction","handleActions","actions","PRODUCTS_GET_ALL","PRODUCTS_GET_ALL_PENDING","PRODUCTS_SAVE","PRODUCTS_DELETE","PRODUCTS_REFRESH","defaultState","all","fetched","findProducts","dispatch","getState","config","get","restAPIUrl","then","suc","refreshProducts","data","saveProducts","product","post","invs","products","forEach","inv","id","push","removeProducts","ids","delete","includes","payload","dispatcher","sort","productA","productB","name","state","action"],"sources":["/home/sarah.plazio/projects/fullstack-starter/ui/src/ducks/products/index.js"],"sourcesContent":["import axios from 'axios'\nimport { createAction, handleActions } from 'redux-actions'\n\nconst actions = {\n  PRODUCTS_GET_ALL: 'products/get_all',\n  PRODUCTS_GET_ALL_PENDING: 'products/get_all_PENDING',\n  PRODUCTS_SAVE: 'products/save',\n  PRODUCTS_DELETE: 'products/delete',\n  PRODUCTS_REFRESH: 'products/refresh'\n}\n\nexport let defaultState = {\n  all: [],\n  fetched: false,\n}\n\nexport const findProducts = createAction(actions.PRODUCTS_GET_ALL, () =>\n  (dispatch, getState, config) => axios\n    .get(`${config.restAPIUrl}/products`)\n    .then((suc) => dispatch(refreshProducts(suc.data)))\n)\n\nexport const saveProducts = createAction(actions.PRODUCTS_SAVE, (product) =>\n  (dispatch, getState, config) => axios\n    .post(`${config.restAPIUrl}/products`, product)\n    .then((suc) => {\n      const invs = []\n      getState().products.all.forEach(inv => {\n        if (inv.id !== suc.data.id) {\n          invs.push(inv)\n        }\n      })\n      invs.push(suc.data)\n      dispatch(refreshProducts(invs))\n    })\n)\n\nexport const removeProducts = createAction(actions.PRODUCTS_DELETE, (ids) =>\n  (dispatch, getState, config) => axios\n    .delete(`${config.restAPIUrl}/products`, { data: ids })\n    .then((suc) => {\n      const invs = []\n      getState().products.all.forEach(inv => {\n        if (!ids.includes(inv.id)) {\n          invs.push(inv)\n        }\n      })\n      dispatch(refreshProducts(invs))\n    })\n)\n\nexport const refreshProducts = createAction(actions.PRODUCTS_REFRESH, (payload) =>\n  (dispatcher, getState, config) =>\n    payload.sort((productA, productB) => productA.name < productB.name ? -1 : productA.name > productB.name ? 1 : 0)\n)\n\nexport default handleActions({\n  [actions.PRODUCTS_GET_ALL_PENDING]: (state) => ({\n    ...state,\n    fetched: false\n  }),\n  [actions.PRODUCTS_REFRESH]: (state, action) => ({\n    ...state,\n    all: action.payload,\n    fetched: true,\n  })\n}, defaultState)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}